<nav class="topnav">
    <a class="brand" href="/">
        J&amp;A
        <img
            src="/anillos.png"
            alt=""
            aria-hidden="true"
            class="rings-img"
        />
    </a>

    <div class="links">
        <a class="link" href="/">Inicio</a>
        <a class="link" href="#ubicacion" id="nav-ubicacion">Ubicaci√≥n</a>
        <a class="link" href="#rsvp" id="nav-asistencia">Asistencia</a>
        <a class="link" href="#lista" id="nav-lista">Lista de bodas</a>
        <a
            class="link"
            href="/fotos"
            id="nav-fotos"
            data-release="2026-05-23T13:00:00"
            hidden
        >
            Fotos
        </a>
    </div>

    <script is:inline>
        /** @returns {Date} */
        function madridNow() {
            const s = new Intl.DateTimeFormat("sv-SE", {
                timeZone: "Europe/Madrid",
                year: "numeric",
                month: "2-digit",
                day: "2-digit",
                hour: "2-digit",
                minute: "2-digit",
                second: "2-digit",
                hour12: false,
            }).format(new Date());
            return new Date(s.replace(" ", "T"));
        }

        /**
         * @param {string} isoLocal
         * @returns {Date}
         */
        function madridDate(isoLocal) {
            const s = new Intl.DateTimeFormat("sv-SE", {
                timeZone: "Europe/Madrid",
                year: "numeric",
                month: "2-digit",
                day: "2-digit",
                hour: "2-digit",
                minute: "2-digit",
                second: "2-digit",
                hour12: false,
            }).format(new Date(isoLocal));
            return new Date(s.replace(" ", "T"));
        }

        /** @type {HTMLAnchorElement|null} */
        const link = document.getElementById("nav-fotos");

        if (link) {
            const releaseISO =
                link.getAttribute("data-release") || "2026-05-23T13:00:00";

            const host = location.hostname;
            const isLocal =
                host === "localhost" ||
                host === "127.0.0.1" ||
                host.startsWith("192.168.") ||
                host.startsWith("10.") ||
                host.endsWith(".local");

            const now = madridNow();
            const release = madridDate(releaseISO);

            if (isLocal || now >= release) link.hidden = false;
        }
        (function () {
            const isHome =
                location.pathname === "/" || location.pathname === "";
            if (isHome) return;

            const ids = ["nav-ubicacion", "nav-asistencia", "nav-lista"];
            ids.forEach((id) => {
                /** @type {HTMLAnchorElement|null} */
                const a = document.getElementById(id);
                if (a) a.href = "/" + a.getAttribute("href");
            });
        })();
    </script>

    <style>
        .topnav {
            position: sticky;
            top: 0;
            z-index: 20;
            background: rgba(255, 250, 249, 0.92);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(63, 58, 54, 0.08);
            padding: 14px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
        }

        .brand {
            display: inline-flex;
            align-items: center;
            gap: 6px;

            font-family: "Cormorant Garamond", serif;
            font-weight: 500;
            letter-spacing: 0.06em;
            text-transform: uppercase;
            color: rgba(63, 58, 54, 0.9);
            text-decoration: none;
            font-size: 0.95rem;
            flex: 0 0 auto;
        }

        .rings-img {
            height: 2.5em;
            width: auto;
            opacity: 0.55;
            transform: translateY(0.08em);
            pointer-events: none;
            user-select: none;
        }

        .links {
            display: flex;
            gap: 12px;
            align-items: center;
            justify-content: flex-end;
            flex-wrap: nowrap;
            min-width: 0;
        }

        .link {
            font-family: "Montserrat", sans-serif;
            font-size: 0.72rem;
            letter-spacing: 0.14em;
            text-transform: uppercase;
            color: rgba(63, 58, 54, 0.75);
            text-decoration: none;
            padding: 8px 10px;
            border-radius: 999px;
            white-space: nowrap;
            flex: 0 0 auto;
        }

        .link:hover {
            background: rgba(255, 255, 255, 0.6);
            color: rgba(63, 58, 54, 0.9);
        }

        @media (max-width: 720px) {
            .topnav {
                flex-direction: column;
                align-items: flex-start;
                padding: 12px 14px 10px;
            }
            .topnav .links {
                position: relative;
                mask-image: linear-gradient(
                    to right,
                    #000 0%,
                    #000 95%,
                    transparent 100%
                );
                -webkit-mask-image: linear-gradient(
                    to right,
                    #000 0%,
                    #000 95%,
                    transparent 100%
                );
                scrollbar-width: thin;
                scrollbar-color: rgba(63, 58, 54, 0.22) transparent;
            }
            .topnav .links::-webkit-scrollbar {
                height: 6px;
            }
            .topnav .links::-webkit-scrollbar-thumb {
                background: rgba(63, 58, 54, 0.18);
                border-radius: 999px;
            }

            .links {
                width: 100%;
                justify-content: flex-start;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                padding-bottom: 6px;
                gap: 10px;
                max-width: 100%;
            }

            .links::-webkit-scrollbar {
                height: 6px;
            }
            .links::-webkit-scrollbar-thumb {
                background: rgba(63, 58, 54, 0.12);
                border-radius: 999px;
            }
        }
    </style>
</nav>
